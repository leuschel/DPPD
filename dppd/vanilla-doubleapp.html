<HTML><HEAD>
<TITLE>DPPD: vanilla-doubleapp</TITLE>
</HEAD>

<BODY>

<H2>The "<DFN>vanilla-doubleapp</DFN>" Benchmark</H2>

Part of the <A HREF="https://github.com/leuschel/DPPD">DPPD Library</A>.


<H3>General Description</H3>

This is a variation of the vanilla metainterpreter specialised for double-append as object program.
More details can be found in the paper:
<OL>
<LI><A href="http://www.stups.uni-duesseldorf.de/w/Special:Publication/LeCrBrVa04_19">M. Leuschel, S.-J. Craig, M. Bruynooghe, W. Vanhoof, Specialising Interpreters Using Offline Partial Deduction, in: Program Development in Computational Logic, Springer LNCS 3049, 2004, pp. 340-375.</a></LI>
</OL>

<H3>The benchmark program</H3>

Note: the program below also contains hints for the 
<a href="http://www.stups.uni-duesseldorf.de/w/Special:Publication/LeVi08_234">BTA for Logen based on size-change-analysis</a>.

<PRE>
	'$MEMOANN'(solve,1,[list_nv]).

	solve([]).
	solve([A|T]) :- solve_atom(A), solve(T).

	solve_atom(A) :- my_clause(A,B), solve(B).



	my_clause(doubleapp(X,Y,Z,R),[app(X,Y,I),app(I,Z,R)]).
	my_clause(app([],L,L),[]).
	my_clause(app([H|X],Y,[H|Z]),[app(X,Y,Z)]).
	my_clause(p,[p]).
	my_clause(solve2([]),[]).
	my_clause(solve2([A|T]), [solve_atom2(A), solve2(T)]).
	my_clause(solve_atom2(A), [my_clause2(A,B), solve2(B)]).
	my_clause(my_clause2(app([],L,L),[]),[]).
	my_clause(my_clause2(app([H|X],Y,[H|Z]),[app(X,Y,Z)]),[]).


	test2(R) :-
	   solve_atom(solve_atom2(app([a,b,c],[d,e,f,g],R))).
	test1(R) :-
	   solve_atom(app([a,b,c],[d,e,f,g],R)).
</PRE>


<H3>The partial deduction query</H3>

<PRE>
 :- solve([doubleapp(X,Y,Z,R)]).
</PRE>



<H3>The run-time queries</H3>

<PRE>
 :- solve([doubleapp([a,b,c,d,e,f,d],[a,b,c,d,e,f,d],[a,b,c,d,e,f,d],A)]).
 :- solve([doubleapp([a,b,c,d,e,f,d,e,g,h,i,l,m,n],[a,b,c,d,e,f,d,e,g,h,i,l,m,n],[a,b,c,d,e,f,d,e,g,h,i,l,m,n],A)]).
</PRE>

<H3>Example solution</H3>

The following was obtained using
<TT>ecce tests/vanilla_list.pl -pe "solve([doubleapp(X,Y,Z,R)])"</TT>:

<PRE>
	/* Specialised program generated by ECCE 2.0 */
	/* PD Goal: A */
	/* Parameters: Abs:l InstCheck:v Msv:s NgSlv:g Part:e Prun:n Sel:t Whstl:f Raf:yesFar:yes Dce:yes Poly:y Dpu:yes ParAbs:yes Msvp:no Rrc:yes */
	/* Transformation time: 20 ms */
	/* Unfolding time: 20 ms */
	/* Post-Processing time: 20 ms */

	/* Specialised Predicates: 
	solve__1(A,B,C,D) :- solve([doubleapp(A,B,C,D)]).
	solve_atom_conj__2(A,B,C,D) :- solve_atom(app(A,B,E1)), my_clause(app(E1,C,D),F1), solve(F1).
	my_clause_conj__3(A,B,C) :- my_clause(app(A,B,C),D1), solve(D1).
	*/

	solve([doubleapp(A,B,C,D)]) :- 
	    solve__1(A,B,C,D).
	solve__1([],A,B,C) :- 
	    my_clause_conj__3(A,B,C).
	solve__1([A|B],C,D,[A|E]) :- 
	    solve_atom_conj__2(B,C,D,E).
	solve_atom_conj__2([],A,B,C) :- 
	    my_clause_conj__3(A,B,C).
	solve_atom_conj__2([A|B],C,D,[A|E]) :- 
	    solve_atom_conj__2(B,C,D,E).
	my_clause_conj__3([],A,A).
	my_clause_conj__3([A|B],C,[A|D]) :- 
	    my_clause_conj__3(B,C,D).
</PRE>

<HR>
<!-- ================================================================= -->


<ADDRESS>
	<A HREF="http://www.stups.uni-duesseldorf.de/w/Imprint">Imprint</A>
</ADDRESS>
